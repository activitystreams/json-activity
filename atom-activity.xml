<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="3"?>
<?rfc tocindent="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<rfc category="exp" docName="atom-activity-01" ipr="none">
  <front>
    <title abbrev="AtomActivity">Atom Activity Extensions (Draft)</title>

    <author fullname="Martin Atkins" initials="M." surname="Atkins">
      <organization>Six Apart</organization>
    </author>

    <author fullname="Will Norris" initials="W." surname="Norris">
      <organization>Google</organization>
    </author>

    <author fullname="Chris Messina" initials="C." surname="Messina">
      <organization>Citizen Agency, Google</organization>
    </author>

    <author fullname="Monica Keller" initials="M." surname="Keller">
      <organization>MySpace, Facebook</organization>
    </author>

    <author fullname="Rob Dolin" initials="R." surname="Dolin">
      <organization>Microsoft</organization>
    </author>

    <date />

    <abstract>
      <t>This document presents an extension that allows activities on social
      objects to be expressed within the Atom Syndication Format.</t>
    </abstract>

    <note title="Requirements Language">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref
      target="RFC2119">RFC 2119</xref>.</t>
    </note>
  </front>

  <middle>
    <section title="Introduction">
      <t>The Atom Syndication Format, as defined in <xref
      target="RFC4287"></xref>, is widely used to transmit various types of
      web content such as weblog posts, news headlines, as well as user
      activities within social sites. In the case of user activities, Atom
      lacks the ability to express much of the activity-specific metadata in a
      machine-parseable format. Activity Streams is an XML format designed to
      allow this additional activity metadata to be expressed within existing
      Atom entries and feeds.</t>

      <t>It is a goal of this specification to provide sufficient metadata
      about an activity such that a consumer of the data can present it to a
      user in a rich human-friendly format. This may include constructing
      readable sentences about the activity that occurred, visual
      representations of the activity, or combining similar activities for
      display.</t>
    </section>

    <section title="Notational Conventions">
      <t>The XML Namespaces URI [W3C.REC-xml-names-19990114] for the XML
      elements and attributes described in this specification is: <spanx
      style="verb">http://activitystrea.ms/spec/1.0/</spanx>.</t>

      <t>In this document, this namespace is referred to as "the AtomActivity
      namespace", and the namespace prefix "activity:" is used for the above
      namespace URI. The namespace prefix "atom:" is used for the namespace
      URI <spanx style="verb">http://www.w3.org/2005/Atom</spanx>. The
      namespace prefix "thr:" is used for the namespace URI <spanx
      style="verb">http://purl.org/syndication/thread/1.0</spanx>. The choices
      of namespace prefix are arbitrary and not semantically significant.</t>

      <t>This specification uses a shorthand form of terms from the XML
      Infoset [W3C.REC-xml-infoset-20040204]. The phrase "Information Item" is
      omitted when naming element and attribute information items. Therefore,
      when this specification uses the term "element," it is referring to an
      element information item in infoset terms. Likewise, when this
      specification uses the term "attribute," it is referring to an attribute
      information item.</t>

      <t>This specification allows the use of IRIs [RFC3987]. Every URI
      [RFC3986] is also an IRI, so a URI may be used wherever an IRI is named.
      When an IRI that is not also a URI is given for dereferencing, it MUST
      be mapped to a URI using the steps in Section 3.1 of [RFC3987]. When an
      IRI is serving as an identifier, it MUST NOT be so mapped.</t>

      <t>The text of this specification provides the sole definition of
      conformance. Examples in this specification are non-normative.</t>

      <t>This specification uses "the Atom specification" to refer to <xref
      target="RFC4287"></xref>.</t>
    </section>

    <section anchor="concepts" title="Activity Concepts">
      <t>In its simplest form, an activity consists of an actor, a verb, and
      an object. It tells the story of a person performing an action on or
      with an object -- "Geraldine posted an photo" or "John shared a video".
      In most cases these elements will be explicitly declared, but they may
      also be implied.</t>

      <section anchor="Activity" title="The Activity Construct">
        <t>An activity consists of the following logical components:</t>

        <section anchor="Activity-Id" title="Id (required)">
          <t>An absolute URI value that conveys a permanent, universally
          unique identifier for the activity. (TODO: Still some question as to
          whether this should be part of the Activity Construct, rather than
          just part of the Atom representation)</t>
        </section>

        <section anchor="Activity-Time" title="Time (required)">
          <t>A [Date Construct] that identifies the time at which the activity
          occurred. It is important to note that this is not necessarily the
          same as the time at which the activity was published.</t>
        </section>

        <section anchor="Activity-Actor" title="Actor (required)">
          <t>An [Object Construct] that identifies the entity that performed
          the activity.</t>
        </section>

        <section anchor="Activity-Verb" title="Verb (one or more)">
          <t>An absolute URI value that identifies the action of the activity.
          If an activity contains more than one verb, all verbs MUST be
          generalizations or specializations of one another. For example, the
          general verb "to experience" might be specialized by a verb "to
          listen to". If a more specific verb is used, publishers SHOULD also
          include all of its more general verbs so that a consumer may use the
          most specific verb it understands.</t>

          <t>An activity consumer SHOULD use the most specific verb it
          understands within each entry. If none of the activity's verbs are
          understood by the consumer, it MAY use other information to infer
          the verb, or the consumer MAY use the content of the activity title,
          summary and/or content to obtain a human-readable description of the
          activity.</t>
        </section>

        <section anchor="Activity-Object" title="Object (one or more)">
          <t>This [Object Construct] identifies the primary object of the
          activity.</t>
        </section>

        <section anchor="Activity-Target" title="Target (zero or one)">
          <t>The target of an activity is an [Object Construct] that
          represents the object to which the activity was performed. The exact
          meaning of an activity's target is dependent on the verb of the
          activity, but will often be the object of the English preposition
          "to". For example, in the activity "John saved a movie to his
          wishlist", the target of the activity is 'wishlist'. The activity
          target MUST NOT be used to identify an indirect object that is not a
          target of the activity.</t>
        </section>

        <section anchor="Activity-Generator" title="Generator">
          <t>Oftentimes, an activity is created by an application that is
          separate from the service the activity is published to. For example,
          a third-party application on a mobile phone may be used to post a
          photo to a photo sharing service. The activity generator is
          identified by a name and optional URI.</t>
        </section>
      </section>

      <section anchor="Object" title="The Object Construct">
        <t>An object construct is a thing, real or imaginary, which
        participates in an activity. It may be the entity performing the
        activity, or the entity on which the activity was performed. An object
        consists of the following logical components:</t>

        <section anchor="Object-Id" title="Id (required)">
          <t>The id of an object construct is an absolute URI that uniquely
          identifies the object.</t>
        </section>

        <section anchor="Object-title" title="Title (optional)">
          <t>This string value provides a human readable display name for the
          object. Activity publishers SHOULD include a title for all
          objects.</t>
        </section>

        <section anchor="Object-link" title="Link (optional)">
          <t>This URI value identifies an HTML representation of the
          object.</t>
        </section>

        <section anchor="Object-ObjectType" title="Object Type (zero or more)">
          <t>An absolute URI that identifies the type of object. If an object
          contains more than one object type, all types MUST be
          generalizations or specializations of one another. For example, the
          general type "article" might be specialized by the type "weblog
          entry". If a more specific type is used, publishers SHOULD also
          include all of its more general types so that a consumer may use the
          most specific type it understands.</t>

          <t>Activity consumers SHOULD use the most specific object type that
          they understand within each entry. The consumer MAY use other
          information to infer the object type if it cannot understand any of
          the object types given. If it cannot infer the object type, a
          consumer MUST act as though no object type is present.</t>

          <t>If no object type is present, the object has no specific type.
          Consumers SHOULD refer to such objects only by their titles. For
          example, when forming an activity sentence a consumer might say
          "Johan posted 'My Cat'" rather than "Johan posted a photo: 'My
          Cat'".</t>
        </section>
      </section>
    </section>

    <section title="Security Considerations">
      <t>As this specification defines an extension to the Atom Syndication
      Format, it is subject to the same security considerations defined in
      <xref target="RFC4287"></xref>.</t>

      <t>Publishers or Consumers implementing Activity Streams as a stream of
      public data may also want to consider the potential for unsolicited
      commercial or malicious content and should take preventative measures to
      recognize such content and either identify it or not include it in their
      stream implementations.</t>

      <t>Publishers should take reasonable measures to make sure potentially
      malicious user input such as cross-site scripting attacks are not
      included in the Activity Streams data they publish.</t>

      <t>Consumers that re-emit ingested content to end-users MUST take
      reasonable measures if emitting ingested content to make sure
      potentially malicious ingested input is not re-emitted.</t>

      <t>Consumers that re-emit ingested content for crawling by search
      engines should take reasonable measures to limit any use of their site
      as a Search Engine Optimization loophole. This may include converting
      un-trusted hyperlinks to text or including a rel="nofollow"
      attribute.</t>
    </section>

    <section title="IANA Considerations">
      <t>None.</t>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      <reference anchor="RFC4287">
        <front>
          <title>The Atom Syndication Format</title>

          <author fullname="Mark Nottingham" initials="M."
                  surname="Nottingham">
            <organization></organization>
          </author>

          <author fullname="Robert Sayre" initials="R." surname="Sayre">
            <organization></organization>

            <address>
              <postal>
                <street></street>

                <city></city>

                <region></region>

                <code></code>

                <country></country>
              </postal>

              <phone></phone>

              <facsimile></facsimile>

              <email></email>

              <uri></uri>
            </address>
          </author>

          <date month="December" year="2005" />
        </front>
      </reference>

      <reference anchor="RFC4685">
        <front>
          <title>Atom Threading Extensions</title>

          <author fullname="James Snell" initials="J." surname="Snell">
            <organization></organization>
          </author>

          <date month="September" year="2006" />
        </front>
      </reference>

      <reference anchor="RFC2119">
        <front>
          <title>Key words for use in RFCs to Indicate Requirement
          Levels</title>

          <author fullname="Scott Bradner" initials="S." surname="Bradner">
            <organization></organization>
          </author>

          <date month="March" year="1997" />
        </front>
      </reference>

      <reference anchor="RFC3987">
        <front>
          <title>Internationalized Resource Identifiers (IRIs)</title>

          <author fullname="Martin Duerst" initials="M." surname="Duerst">
            <organization></organization>
          </author>

          <author fullname="Michel Suignard" initials="M." surname="Suignard">
            <organization></organization>

            <address>
              <postal>
                <street></street>

                <city></city>

                <region></region>

                <code></code>

                <country></country>
              </postal>

              <phone></phone>

              <facsimile></facsimile>

              <email></email>

              <uri></uri>
            </address>
          </author>

          <date month="January" year="2005" />
        </front>
      </reference>

      <reference anchor="RFC3339">
        <front>
          <title>Date and Time on the Internet: Timestamps</title>

          <author fullname="Graham Klyne" initials="G." surname="Klyne">
            <organization></organization>
          </author>

          <date month="July" year="2002" />
        </front>
      </reference>

      <reference anchor="RSS_2.0"
                 target="http://www.rssboard.org/rss-specification">
        <front>
          <title>Date and Time on the Internet: Timestamps</title>

          <author fullname="Graham Klyne" initials="G." surname="Klyne">
            <organization></organization>
          </author>

          <date month="July" year="2002" />
        </front>
      </reference>
    </references>

    <section title="Acknowledgements">
      <t>...</t>
    </section>

    <section title="Examples">
      <t>This appendix is non-normative. Where these examples include
      fragments of XML documents, assume the namespace declarations <spanx
      style="verb">xmlns="http://www.w3.org/2005/Atom" xmlns:activity="http://activitystrea.ms/spec/1.0/"</spanx>
      are in scope.</t>

      <section anchor="activityentryexample" title="Activity Entry Examples">
        <figure anchor="activityentrysimple">
          <preamble>A typical activity entry</preamble>

          <artwork><![CDATA[<entry>
   <id>tag:photopanic.example.com,2008:activity01</id>
   <title>Geraldine posted a Photo on PhotoPanic</title>
   <published>2008-11-02T15:29:00Z</published>
   <link rel="alternate" type="text/html"
     href="http://example.com/geraldine/activities/1" />
   <activity:verb>
      http://activitystrea.ms/schema/1.0/post
   </activity:verb>
   <activity:object>
      <id>tag:photopanic.example.com,2008:photo01</id>
      <title>My Cat</title>
      <published>2008-11-02T15:29:00Z</published>
      <link rel="alternate" type="text/html"
        href="http://example.com/geraldine/photos/1" />
      <activity:object-type>
          tag:atomactivity.example.com,2008:photo
      </activity:object-type>
      <source>
          <title>Geraldine's Photos</title>
          <link rel="self" type="application/atom+xml"
            href="http://example.com/geraldine/photofeed.xml" />
          <link rel="alternate" type="text/html"
            href="http://example.com/geraldine/" />
      </source>
   </activity:object>
   <content type="html">
       &lt;p&gt;Geraldine posted a Photo on PhotoPanic&lt;/p&gt;
       &lt;img src="/geraldine/photo1.jpg"&gt;
   </content>
</entry>]]></artwork>

          <postamble>This example shows a typical activity entry using the
          post verb defined by this specification and a hypothetical "photo"
          object type. It also demonstrates the use of atom:title and
          atom:content to provide fallback content for feed processors that do
          not support activity extensions. An activity stream application
          might render this entry into the sentence "Geraldine posted a photo
          titled 'My Cat' in Geraldine's Photos", with the photo title and the
          source feed title presented as links.</postamble>
        </figure>

        <figure anchor="activityentrycomplex">
          <artwork><![CDATA[<entry>
    <id>tag:photopanic.example.com,2009:/activity/4859568/PhotoAdd/2519358/2009171</id>
    <title type="text">Geraldine added two new photos to the My Pets album.</title>
    <published>2009-06-21T00:28:35Z</published>
    <author>
      <name>Geraldine</name>
      <uri>http://example.com/geraldine</uri>
      <id>tag:photopanic.example.com,2009:/Person/4859568</id>
      <activity:object-type>
        http://activitystrea.ms/schema/1.0/person
      </activity:object-type>
      <link rel="alternate" type="text/html"
        href="http://example.com/geraldine" />
    </author>
    <link rel="alternate" type="text/html"
      href="http://example.com/geraldine/activities/1234" />
    <content type="xhtml">...</content>
    <activity:target>
      <activity:object-type>http://activitystrea.ms/schema/1.0/photo-album</activity:object-type>
      <id>tag:photopanic.example.com,2009:/Photo_Album/2519358</id>
      <title>My Pets</title>
      <link rel="alternate" type="text/html"
            href="/geraldine/albums/pets" />
    </activity:target>
    <activity:object>
      <activity:object-type>http://activitystrea.ms/schema/1.0/photo</activity:object-type>
      <activity:object-type>http://activitystrea.ms/schema/1.0/image</activity:object-type>
      <id>tag:photopanic.example.com,2009:/Photo/2519358/60764840</id>
      <title>My Cat</title>
      <link rel="alternate" type="text/html"
            href="/geraldine/photos/1643" />
      <link rel="preview" type="image/jpeg"
            href="/geraldine/photos/1643/thumb.jpg" />
      <link rel="enclosure" type="image/jpeg"
            href="/geraldine/photos/1643/full.jpg" />
    </activity:object>
    <activity:object>
      <activity:object-type>http://activitystrea.ms/schema/1.0/image</activity:object-type>
      <activity:object-type>http://activitystrea.ms/schema/1.0/photo</activity:object-type>
      <id>tag:photopanic.example.com,2009:/Photo/2519358/60764844</id>
      <title></title>
      <link rel="alternate" type="text/html"
            href="/geraldine/photos/1634" />
      <link rel="preview" type="image/jpeg"
            href="/geraldine/photos/1634/thumb.jpg" />
      <link rel="enclosure" type="image/jpeg"
            href="/geraldine/photos/1634/full.jpg" />
    </activity:object>
</entry>]]></artwork>

          <postamble>Example: An activity entry showing the use of the actor,
          verb, object and target elements. Also illustrated is the use of
          multiple objects in a single activity entry, which serves as a
          shorthand for publishing multiple consecutive activities with the
          same verb and target.</postamble>
        </figure>
      </section>

      <section anchor="objectentryexample" title="Object Entry Example">
        <figure>
          <preamble>A simple object entry</preamble>

          <artwork><![CDATA[<entry>
   <id>tag:photopanic.example.com,2008:photo01</id>
   <title>My Cat</title>
   <published>2008-11-02T15:29:00Z</published>
   <link rel="alternate" type="text/html"
         href="/geraldine/photos/1" />
   <activity:object-type>
       tag:atomactivity.example.com,2008:photo
   </activity:object-type>
</entry>
]]></artwork>

          <postamble>This example shows an object entry describing the object
          referred to in the activity from <xref
          target="activityentryexample"></xref>. That example would also be an
          acceptable implied post activity for this entry, assuming that this
          entry were in a feed whose attributes match those of the atom:source
          in the activity entry example.</postamble>
        </figure>
      </section>
    </section>
  </back>
</rfc>
<!-- vim: set expandtab sw=2 ts=2: -->
